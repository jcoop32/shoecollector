{% extends 'base.html' %}
{% block content %}
  <h1>Explore</h1>
  <!-- search bar -->
  <form class="search-form " method="GET" action="{% url 'explore_page' %}">
    <div class="input-field">
      <input type="text" name="brand" value="{{ search_query }}" placeholder="Search by shoe name" id="searchbar">
      <button type="submit" class="btn" id="searchbarBtn"><i class="material-icons">search</i></button>
    </div>
  </form>
  <!--  -->
  
  {% if shoes %}
  <p class="right-algin">Total Shoes: {{ shoes.count }}</p>
  <!-- sorting feature -->
  <!-- Dropdown Trigger -->
  <a class="dropdown-trigger" href="#" data-target="sort"><i class="material-icons">filter_list</i>
  </a>

  <!-- Dropdown Structure -->
  <ul id="sort" class="dropdown-content">
    <!-- query for views, use GET request to sort -->
    <li><a href="?sort=brand">Brand</a></li>
    <!-- <li><a href="?sort=likes">Popular</a></li> -->
    <li><a href="?sort=price">Price (low to high)</a></li>
    <li><a href="?sort=-price">Price (high to low)</a></li>
  </ul>
    <div class="row">
    {% for shoe in shoes %}
        <div class="col s4">
          <a href="{% url 'details' shoe.id %}" class="black-text">
          <div class="card large hoverable">
            <div class="card-image" style="height: 350px;">
              <img src="{{ shoe.img }}">
            </div>
            <div class="card-content ">
            <span class="card-title black-text flex-text">{{ shoe.brand }} - {{ shoe.modelName }}</span>
              <!-- <p>Colorway: {{ shoe.colorway }}</p> -->
              <!-- https://docs.djangoproject.com/en/4.2/ref/templates/builtins/#floatformat -->
              <p>Price: ${{ shoe.price|floatformat:"2g" }}</p>
              <p>User: <a href="{% url 'user_collection' shoe.user.username %}">{{ shoe.user.username }}</a></p>
            </div>
            <div class="card-action ">
              <a href="{% url 'details' shoe.id %}" class="black-text">View</a>
            </div>
          </div>
        </a>
        </div>
    {% endfor %}
    </div>
  {% else %}
    <p>No shoes found.</p>
  {% endif %}
  
{% endblock %}